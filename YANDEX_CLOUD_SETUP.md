# Настройка Yandex Cloud Function для отправки сообщений в Telegram

## Шаги настройки:

### 1. Загрузите код функции

Скопируйте содержимое файла `yandex-cloud-function.js` в редактор кода функции на Yandex Cloud.

### 2. Настройте переменные окружения

В настройках функции добавьте переменные окружения:

- `TELEGRAM_BOT_TOKEN` - токен вашего Telegram бота
- `TELEGRAM_CHAT_ID` - ID чата/группы, куда отправлять сообщения

### 3. Получите URL функции

После создания функции вы получите URL вида:
```
https://functions.yandexcloud.net/d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6/telegram-sender
```

### 4. Настройте переменную окружения в проекте

Создайте файл `.env` в корне проекта (или добавьте в существующий):

```env
TELEGRAM_API_URL=https://functions.yandexcloud.net/ваш-id/имя-функции
```

**Важно:** 
- Для статической генерации (`npm run generate`) переменные окружения должны быть доступны на этапе сборки
- Если используете CI/CD, добавьте переменную окружения в настройки сборки
- Если собираете локально, убедитесь, что `.env` файл существует

### 5. Пересоберите проект

```bash
npm run generate
```

### 6. Проверка

После деплоя проверьте отправку форм - сообщения должны приходить в Telegram.

## Примечания:

- Функция обрабатывает оба типа запросов: контактную форму и форму заказа
- Автоматически определяет тип запроса по наличию полей
- Поддерживает CORS для работы со статического сайта
- Обрабатывает ошибки и возвращает понятные сообщения

